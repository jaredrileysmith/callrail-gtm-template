___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "CallRail - Dynamic Number Insertion",
  "brand": {
    "id": "brand_dummy",
    "displayName": "CallRail",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "This is the unofficial template is for the CallRail Dynamic Number Insertion tag",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "LABEL",
    "name": "textLabel1",
    "displayName": "From the CallRail snippet;"
  },
  {
    "type": "LABEL",
    "name": "textLabel2",
    "displayName": "Account Number in \u003cstrong\u003ebold \u003c/strong\u003e//cdn.callrail.com/companies/\u003cstrong\u003e123456789\u003c/strong\u003e/abcdefghijkl123456/12/swap.js"
  },
  {
    "type": "LABEL",
    "name": "textLabel3",
    "displayName": "Company ID in \u003cstrong\u003ebold \u003c/strong\u003e//cdn.callrail.com/companies/123456789/\u003cstrong\u003eabcdefghijkl123456\u003c/strong\u003e/12/swap.js"
  },
  {
    "type": "TEXT",
    "name": "accountNumber",
    "displayName": "Account Number",
    "simpleValueType": true,
    "help": "The nine-digit account number references the ID CallRail assigns to your account when it is created.",
    "valueHint": "123456789",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      },
      {
        "type": "REGEX",
        "args": [
          "^[0-9]{9}$"
        ]
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "companyID",
    "displayName": "Company ID",
    "simpleValueType": true,
    "help": "The 20 character alphanumeric string assigned to a company upon creation in your account",
    "valueHint": "abcdefghijkl123456",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      },
      {
        "type": "REGEX",
        "args": [
          "^[0-9A-Za-z]{20}$"
        ]
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const injectScript = require('injectScript');

const url = 'https://cdn.callrail.com/companies/' + data.accountNumber + '/' + data.accountID + '/12/swap.js';

injectScript(url, data.gtmOnSuccess, data.gtmOnFailure);




// Call data.gtmOnSuccess when the tag is finished.
data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://cdn.callrail.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 11/25/2019, 3:08:09 PM


